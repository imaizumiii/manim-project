# プロジェクト仕様書

## プロジェクト概要

数学解説動画をYouTubeに投稿するためのManimプロジェクト。再利用可能なコンポーネントとテンプレートを提供し、効率的かつ一貫性のある動画制作を実現する。

## 目的

- 数学解説動画の効率的な制作
- 一貫性のあるビジュアルスタイルの維持
- 再利用可能なコンポーネントによる開発速度の向上
- シリーズ動画制作に対応した拡張性の確保

## 要件定義

### 機能要件

#### 1. ロゴ表示機能
- **要件**: 全シーンの右下にロゴを常時表示
- **詳細**:
  - ロゴは全シーンで表示される
  - 位置は右下に固定
  - 透明度やサイズは調整可能
  - ロゴファイルは `assets/logo/logo.png` に配置

#### 2. BGM管理機能
- **要件**: 全編でBGMを再生し、フェードイン/アウトを実装
- **詳細**:
  - 動画全体でBGMを再生
  - 開始時にフェードイン
  - 終了時にフェードアウト
  - BGMファイルは `assets/music/bgm.mp3` に配置

#### 3. テーマカラー管理
- **要件**: 統一されたテーマカラーを一元管理
- **詳細**:
  - メインカラー、サブカラー、アクセントカラーを定義
  - 背景色とテキスト色を設定
  - `lib/config.py` で管理

#### 4. スタイル設定
- **要件**: 再利用可能なスタイル設定を提供
- **詳細**:
  - フォント設定
  - 数式スタイル（LaTeX）
  - アニメーション設定
  - `lib/styles.py` で管理

#### 5. シーン構成テンプレート
- **要件**: 再利用可能なシーン構成を提供
- **詳細**:
  - `BaseScene` クラスで共通機能を実装
  - 各動画は `BaseScene` を継承
  - 必要に応じてイントロ/アウトロシーンを追加

#### 6. カスタムオブジェクト
- **要件**: 数学解説に特化したカスタムオブジェクトを提供
- **詳細**:
  - 数式関連のカスタムオブジェクト
  - 図表テンプレート
  - 再利用可能なアニメーション関数

### 非機能要件

#### 1. パフォーマンス
- 低品質プレビュー（`-ql`）で高速に確認可能
- 最終レンダリングは高品質（`-qh`）で実行

#### 2. 保守性
- コードは再利用可能な構造に
- 設定は一元管理
- ドキュメントを整備

#### 3. 拡張性
- 新しいカスタムオブジェクトを簡単に追加可能
- 新しいシーンテンプレートを追加可能
- 設定の追加が容易

#### 4. 一貫性
- すべての動画で統一されたスタイル
- 共通機能は必ず `BaseScene` を使用

## 技術仕様

### 使用技術

- **Python**: 3.8以上
- **Manim**: Community Edition（最新版推奨）
- **その他**: 必要に応じて追加

### プロジェクト構造

詳細は [ARCHITECTURE.md](./ARCHITECTURE.md) を参照。

### ファイル命名規則

- 動画スクリプト: `video_XXX_description.py` または `description.py`
- クラス名: PascalCase（例: `BaseScene`, `MathObject`）
- 関数名: snake_case（例: `show_logo`, `fade_in_bgm`）
- 設定定数: UPPER_SNAKE_CASE（例: `THEME_COLORS`, `RESOLUTION`）

## 動画仕様

### 基本仕様

- **長さ**: 2-3分
- **解像度**: 1080p60（デフォルト、変更可能）
- **フレームレート**: 60fps（デフォルト、変更可能）
- **形式**: MP4

### コンテンツ仕様

- **ジャンル**: 数学解説
- **シリーズ**: 可能性あり（将来的にシリーズ対応）
- **スタイル**: 統一されたビジュアルスタイル

## 開発方針

### ワークフロー

1. **計画**: 動画の内容と構成を決定
2. **スクリプト作成**: `videos/` に新しいスクリプトを作成
3. **低品質プレビュー**: `-ql` で高速に確認
4. **調整・修正**: 必要に応じてスクリプトを修正
5. **最終レンダリング**: `-qh` で高品質動画を生成

### コード品質

- 再利用可能なコードは `lib/` に配置
- 設定は `config.py` に集約
- コメントは適切に記述
- ドキュメントを随時更新

### バージョン管理

- Gitを使用（推奨）
- `output/` ディレクトリは `.gitignore` に追加
- コミットメッセージは明確に

## 今後の拡張予定

### 短期

- [ ] 基本的なライブラリ構造の実装
- [ ] `BaseScene` クラスの実装
- [ ] ロゴ表示機能の実装
- [ ] BGM管理機能の実装
- [ ] テーマカラー設定の実装

### 中期

- [ ] 数式関連のカスタムオブジェクトの追加
- [ ] シーンテンプレートの拡充
- [ ] ユーティリティ関数の追加
- [ ] ドキュメントの充実

### 長期

- [ ] シリーズ動画対応機能の追加
- [ ] より高度なアニメーション関数の実装
- [ ] テンプレートライブラリの拡充
- [ ] 自動化スクリプトの追加

## 制約事項

- Manim Community Editionの機能に依存
- アセットファイル（ロゴ、BGM）は手動で配置が必要
- レンダリング時間は動画の長さと品質に依存

## リスクと対策

### リスク1: レンダリング時間が長い
- **対策**: 開発中は低品質プレビューを使用、最終のみ高品質

### リスク2: アセットファイルの管理
- **対策**: `assets/` ディレクトリに集約、ドキュメントに記載

### リスク3: コードの再利用性が低い
- **対策**: 設計段階で再利用性を考慮、定期的なリファクタリング

## 成功基準

- [ ] 統一されたスタイルで動画を制作できる
- [ ] ロゴとBGMが全動画で一貫して適用される
- [ ] 新しい動画を効率的に作成できる
- [ ] 再利用可能なコンポーネントが機能する
- [ ] ドキュメントが整備されている
